webpackJsonp([21,41],{209:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{encashs:[],dialogVisible:!1,users:[],type:"alipay",en_index:0}},created:function(){this.type=this.$route.query.type?this.$route.query.type:"alipay",this.fetch_soruce(this.type)},filters:{conver:function(t){var e="";switch(t){case"alipay":e="支付宝";break;case"wx_pub":e="公众号";break;case"bank":e="银行卡";break;default:e="支付宝"}return e}},methods:{fetch_soruce:function(){var t=this;this.$http.get("encashments.json?type="+this.type).then(function(e){var a=e.body;t.encashs=a.klass},function(e){t.$alert("加载失败")})},show_users:function(t){var e=this;this.dialogVisible=!0,this.$http.get("encashments/"+t+"/fetch_users.json").then(function(t){e.users=t.body.klass},function(t){e.$alert("加载失败")})},batch_pay:function(t){var e=this;this.$http.post("encashments/"+t+"/batch_options.json").then(function(t){var e=t.body;200==e.code&&(window.location.href=e.url)},function(t){e.$alert("加载失败")})},fetch_type:function(t){this.type=t,this.fetch_soruce(t)},single_handle:function(t,e){var a=this;this.$http.post("encashments/"+t+"/recipient.json",{type:this.type}).then(function(n){200==n.body.code&&(a.users.splice(e,1),a.$message("处理完成"),a.users.length<=0&&a.$http.post("encashments/"+t+"/close_encash.json",{}).then(function(t){200==t.body.code&&(a.encashs.splice(0,1),a.dialogVisible=!1)}))})},rowClick:function(t){this.$router.push("/encashs/"+t+"?type="+this.type)}}}},341:function(t,e,a){e=t.exports=a(7)(),e.push([t.i,"hr[data-v-7f397d8f]{margin:15px 0}.tag[data-v-7f397d8f]{margin-right:5px;width:20%;text-align:center;padding:12px;height:50px;font-size:16px;cursor:pointer}.alipay[data-v-7f397d8f],.bank[data-v-7f397d8f],.wx_pub[data-v-7f397d8f]{border-bottom:4px solid red}",""])},645:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("router-link",{attrs:{to:"/dashboard"}},[t._v("\n                    主页\n                ")])],1),t._v(" "),a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-setting"}),t._v("提现列表")])],1)],1),t._v(" "),a("div",{staticClass:"tag-ele"},[a("span",{on:{click:function(e){t.fetch_type("alipay")}}},[a("el-tag",{staticClass:"tag",class:"alipay"===t.type?t.type:null},[t._v("提现到支付宝")])],1),t._v(" "),a("span",{on:{click:function(e){t.fetch_type("wx_pub")}}},[a("el-tag",{staticClass:"tag",class:"wx_pub"===t.type?t.type:null,attrs:{type:"gray"}},[t._v("提现到微信公众号")])],1),t._v(" "),a("span",{on:{click:function(e){t.fetch_type("bank")}}},[a("el-tag",{staticClass:"tag",class:"bank"===t.type?t.type:null,attrs:{type:"primary"}},[t._v("提现到银行卡")])],1)]),t._v(" "),a("hr"),t._v(" "),a("el-table",{attrs:{data:t.encashs,border:""}},[a("el-table-column",{attrs:{label:"生成时间",width:"300"},scopedSlots:t._u([["default",function(e){return[t._v("\n                "+t._s(t._f("date")(1e3*e.row.created_at,"%Y-%m-%d %T"))+"\n            ")]}]])}),t._v(" "),a("el-table-column",{attrs:{label:"总金额",width:"250"},scopedSlots:t._u([["default",function(e){return[t._v("\n                "+t._s((e.row.amount/100).toFixed(2))+"\n            ")]}]])}),t._v(" "),a("el-table-column",{attrs:{label:"提现的用户"},scopedSlots:t._u([["default",function(e){return[a("span",{staticClass:"el-button el-button--primary",on:{click:function(a){t.show_users(e.row.id)}}},[t._v("查看明细")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.rowClick(e.row.id)}}},[t._v("查看")])]}]])}),t._v(" "),"alipay"===t.type?[a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([["default",function(e){return[a("span",{staticClass:"el-button el-button--danger",on:{click:function(a){t.batch_pay(e.row.id)}}},[t._v("提交到"+t._s(t._f("conver")(t.type)))])]}]])})]:t._e()],2),t._v(" "),a("el-dialog",{attrs:{title:"提现的用户",size:"large"},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.users,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{label:"开户行"},scopedSlots:t._u([["default",function(e){return[t._v("\n                    "+t._s(e.row.open_bank)+"\n                ")]}]])}),t._v(" "),a("el-table-column",{attrs:{label:"支行"},scopedSlots:t._u([["default",function(e){return[t._v("\n                    "+t._s(e.row.open_bank_code)+"\n                ")]}]])}),t._v(" "),a("el-table-column",{attrs:{prop:"account",label:"提现的账户"}}),t._v(" "),a("el-table-column",{attrs:{label:"提现金额"},scopedSlots:t._u([["default",function(e){return[t._v("\n                    "+t._s((e.row.amount/100).toFixed(2))+"\n                ")]}]])}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"理由"}}),t._v(" "),a("el-table-column",{attrs:{label:"提交时间"},scopedSlots:t._u([["default",function(e){return[t._v("\n                    "+t._s(t._f("date")(1e3*e.row.created_at,"%Y-%m-%d %T"))+"\n                ")]}]])}),t._v(" "),"alipay"!=t.type?[a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([["default",function(e){return[a("span",{staticClass:"el-button el-button--danger",on:{click:function(a){t.single_handle(e.row.id,e.$index)}}},[t._v("处理"+t._s(t._f("conver")(t.type))+"支付")])]}]])})]:t._e()],2)],1)],1)},staticRenderFns:[]}},682:function(t,e,a){var n=a(341);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(30)("ecc74952",n,!0)},94:function(t,e,a){a(682);var n=a(31)(a(209),a(645),"data-v-7f397d8f",null);t.exports=n.exports}});