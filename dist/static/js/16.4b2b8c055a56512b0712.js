webpackJsonp([16,39],{209:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{invoices:[],invoice:{},page:{next_page:0},dialogVisible:!1,handleVisible:!1}},created:function(){this.fetchResource(this.page.next_page)},methods:{fetchResource:function(e){var t=this;this.$http.get("invoices.json?page="+e).then(function(e){t.invoices=e.body.klass})},show_ship:function(e,t){var i=this;i.invoices.forEach(function(t,n){if(t.id==e)return void(i.invoice=t)}),this.dialogVisible=!0},invoice_panel:function(e,t){var i=this;i.invoices.forEach(function(t,n){if(t.id==e)return void(i.invoice=t)}),this.handleVisible=!0},handleSubmit:function(e){var t=this;this.$http.put("invoices/"+this.invoice.id+".json",this.invoice).then(function(e){t.handleVisible=!1,t.$message("完成")})},handlePage:function(e){this.fetchResource(e)},formatter:function(e,t){var i="";switch("处理进度"===t.label?e.handle_type:e.invoice_type){case"common":i="普通发票";break;case"added":i="增值税发票";break;case"completed":i="已发送";break;case"audit":i="审核中";break;default:i="--"}return i}}}},338:function(e,t,i){t=e.exports=i(7)(),t.push([e.i,"ul[data-v-cf29bec4]{list-style:none}",""])},643:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-menu"}),e._v(" "),i("router-link",{attrs:{to:"/dashboard"}},[e._v("\n         主页\n         ")])],1),e._v(" "),i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-setting"}),e._v(" 开票列表")])],1)],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.invoices,border:""}},[i("el-table-column",{attrs:{prop:"company_name",label:"开票单位"}}),e._v(" "),i("el-table-column",{attrs:{prop:"content",label:"开票内容"}}),e._v(" "),i("el-table-column",{attrs:{prop:"invoice_type",label:"发票类型",formatter:e.formatter}}),e._v(" "),i("el-table-column",{attrs:{prop:"price",label:"开票金额"}}),e._v(" "),i("el-table-column",{attrs:{prop:"handle_type",label:"处理进度",formatter:e.formatter}}),e._v(" "),i("el-table-column",{attrs:{prop:"express_name",label:"快递公司"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([["default",function(t){return["audit"===t.row.handle_type?i("span",{on:{click:function(i){e.invoice_panel(t.row.id,t.$index)}}},[e._v("确认开票")]):i("span",{on:{click:function(i){e.show_ship(t.row.id,t.$index)}}},[e._v("查看快递状态")])]}]])})],1),e._v(" "),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{layout:"prev, pager, next","current-page":e.page.current_page,"page-size":25,total:e.page.total_count},on:{"current-change":e.handlePage}})],1),e._v(" "),i("el-dialog",{attrs:{title:"查看快递",size:"tiny"},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t}}},[i("ul",[i("li",[e._v(" 开票单位: "),i("span",[e._v(e._s(e.invoice.company_name))])]),e._v(" "),i("li",[e._v("金额: "),i("span",[e._v(e._s(e.invoice.price))])])]),e._v(" "),i("span",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("关闭")])],1)]),e._v(" "),i("el-dialog",{attrs:{title:"处理开票",size:"tiny"},model:{value:e.handleVisible,callback:function(t){e.handleVisible=t}}},[i("el-form",{attrs:{inline:!0,model:e.invoice,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"快递公司"}},[i("el-input",{model:{value:e.invoice.express_name,callback:function(t){e.invoice.express_name=t}}})],1),e._v(" "),i("el-form-item",{attrs:{label:"单号"}},[i("el-input",{model:{value:e.invoice.number,callback:function(t){e.invoice.number=t}}})],1),e._v(" "),i("el-form-item",{attrs:{label:"操作"}},[i("el-select",{model:{value:e.invoice.handle_type,callback:function(t){e.invoice.handle_type=t}}},[i("el-option",{attrs:{label:"确认开票",value:"completed"}})],1)],1)],1),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit(e.invoice.id)}}},[e._v("提交")]),e._v(" "),i("el-button",{on:{click:function(t){e.handleVisible=!1}}},[e._v("取消")])],1)],1)},staticRenderFns:[]}},673:function(e,t,i){var n=i(338);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(30)("6103a79c",n,!0)},97:function(e,t,i){i(673);var n=i(31)(i(209),i(643),"data-v-cf29bec4",null);e.exports=n.exports}});