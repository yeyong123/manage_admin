webpackJsonp([22,41],{209:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{encashs:[],dialogVisible:!1,users:[],type:"bank",en_index:0}},created:function(){this.type=this.$route.query.type?this.$route.query.type:"bank",this.fetch_soruce(this.type)},filters:{conver:function(t){var e="";switch(t){case"alipay":e="支付宝";break;case"wx_pub":e="公众号";break;case"bank":e="银行卡";break;default:e="支付宝"}return e}},methods:{fetch_soruce:function(){var t=this;this.$http.get("encashments.json?type="+this.type).then(function(e){var n=e.body;t.encashs=n.klass},function(e){t.$alert("加载失败")})},export_excel:function(){var t=this;this.$http.get("encashments/"+this.encashs[0].id+"/fetch_users.xlsx?limit=100",{responseType:"blob",content_type:"application/xlsx"}).then(function(t){window.location.href=t.url},function(e){t.$alert("网络连接失败")})},show_users:function(t){var e=this;this.dialogVisible=!0,this.$http.get("encashments/"+t+"/fetch_users.json").then(function(t){e.users=t.body.klass},function(t){e.$alert("加载失败")})},batch_pay:function(t){var e=this;this.$http.post("encashments/"+t+"/batch_options.json").then(function(t){var e=t.body;200==e.code&&(window.location.href=e.url)},function(t){e.$alert("加载失败")})},fetch_type:function(t){this.type=t,this.fetch_soruce(t)},single_handle:function(t,e){var n=this;this.$http.post("encashments/"+t+"/recipient.json",{type:this.type}).then(function(a){200==a.body.code&&(n.users.splice(e,1),n.$message("处理完成"),n.users.length<=0&&n.$http.post("encashments/"+t+"/close_encash.json",{}).then(function(t){200==t.body.code&&(n.encashs.splice(0,1),n.dialogVisible=!1)}))})},rowClick:function(t){this.$router.push("/encashs/"+t+"?type="+this.type)}}}},342:function(t,e,n){e=t.exports=n(7)(),e.push([t.i,"hr[data-v-7f397d8f]{margin:15px 0}.tag[data-v-7f397d8f]{margin-right:5px;width:20%;text-align:center;padding:12px;height:50px;font-size:16px;cursor:pointer}.alipay[data-v-7f397d8f],.bank[data-v-7f397d8f],.wx_pub[data-v-7f397d8f]{border-bottom:4px solid red}",""])},646:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"crumbs"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-menu"}),t._v(" "),n("router-link",{attrs:{to:"/dashboard"}},[t._v("\n                    主页\n                ")])],1),t._v(" "),n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-setting"}),t._v("提现列表")])],1)],1),t._v(" "),n("div",{staticClass:"tag-ele"},[n("span",{on:{click:function(e){t.fetch_type("bank")}}},[n("el-tag",{staticClass:"tag",class:"bank"===t.type?t.type:null,attrs:{type:"primary"}},[t._v("提现到银行卡")])],1),t._v(" "),n("span",{on:{click:function(e){t.fetch_type("alipay")}}},[n("el-tag",{staticClass:"tag",class:"alipay"===t.type?t.type:null},[t._v("提现到支付宝")])],1),t._v(" "),n("span",{on:{click:function(e){t.fetch_type("wx_pub")}}},[n("el-tag",{staticClass:"tag",class:"wx_pub"===t.type?t.type:null,attrs:{type:"gray"}},[t._v("提现到微信公众号")])],1)]),t._v(" "),n("hr"),t._v(" "),n("el-table",{attrs:{data:t.encashs,border:""}},[n("el-table-column",{attrs:{label:"生成时间",width:"300"},scopedSlots:t._u([["default",function(e){return[t._v("\n                "+t._s(t._f("date")(1e3*e.row.created_at,"%Y-%m-%d %T"))+"\n            ")]}]])}),t._v(" "),n("el-table-column",{attrs:{label:"总金额",width:"250"},scopedSlots:t._u([["default",function(e){return[t._v("\n                "+t._s((e.row.amount/100).toFixed(2))+"\n            ")]}]])}),t._v(" "),n("el-table-column",{attrs:{label:"提现的用户"},scopedSlots:t._u([["default",function(e){return[n("span",{staticClass:"el-button el-button--primary",on:{click:function(n){t.show_users(e.row.id)}}},[t._v("查看明细")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.rowClick(e.row.id)}}},[t._v("查看")])]}]])}),t._v(" "),"alipay"===t.type?[n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([["default",function(e){return[n("span",{staticClass:"el-button el-button--danger",on:{click:function(n){t.batch_pay(e.row.id)}}},[t._v("提交到"+t._s(t._f("conver")(t.type)))])]}]])})]:t._e()],2),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12,offset:"6"}},[t.encashs[0].amount>0?n("el-button",{staticStyle:{width:"100%","margin-top":"50px",height:"80px"},attrs:{size:"medium",type:"info",icon:"document"},on:{click:t.export_excel}},[t._v("导出提现列表")]):n("p",{staticStyle:{width:"100%","margin-top":"50px"}},[t._v("今天没有提现")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"提现的用户",size:"large"},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e}}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.users,border:""}},[n("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),n("el-table-column",{attrs:{label:"开户行"},scopedSlots:t._u([["default",function(e){return[t._v("\n                    "+t._s(e.row.open_bank)+"\n                ")]}]])}),t._v(" "),n("el-table-column",{attrs:{label:"支行"},scopedSlots:t._u([["default",function(e){return[t._v("\n                    "+t._s(e.row.open_bank_code)+"\n                ")]}]])}),t._v(" "),n("el-table-column",{attrs:{prop:"account",label:"提现的账户"}}),t._v(" "),n("el-table-column",{attrs:{label:"提现金额"},scopedSlots:t._u([["default",function(e){return[t._v("\n                    "+t._s((e.row.amount/100).toFixed(2))+"\n                ")]}]])}),t._v(" "),n("el-table-column",{attrs:{prop:"description",label:"理由"}}),t._v(" "),n("el-table-column",{attrs:{label:"提交时间"},scopedSlots:t._u([["default",function(e){return[t._v("\n                    "+t._s(t._f("date")(1e3*e.row.created_at,"%Y-%m-%d %T"))+"\n                ")]}]])}),t._v(" "),"alipay"!=t.type?[n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([["default",function(e){return[n("span",{staticClass:"el-button el-button--danger",on:{click:function(n){t.single_handle(e.row.id,e.$index)}}},[t._v("处理"+t._s(t._f("conver")(t.type))+"支付")])]}]])})]:t._e()],2)],1)],1)},staticRenderFns:[]}},684:function(t,e,n){var a=n(342);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(30)("ecc74952",a,!0)},94:function(t,e,n){n(684);var a=n(31)(n(209),n(646),"data-v-7f397d8f",null);t.exports=a.exports}});