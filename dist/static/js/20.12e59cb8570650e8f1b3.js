webpackJsonp([20,41],{213:function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{libs:[],page:{next_page:0,current_page:0},lib:{name:"",price:"",specify:"",count:"",company_id:"",remark:""},dialogVisible:!1,edit_id:"",action:"edit"}},created:function(){this.fetchResource(this.page.next_page)},methods:{fetchResource:function(t){var e=this;this.$http.get("material_libs.json?page="+t).then(function(t){e.libs=t.body.klass,e.page=t.body.page},function(t){e.$message.error("加载失败")})},handlePage:function(t){this.fetchResource(t)},addLib:function(){this.action="new",this.dialogVisible=!0},libSubmit:function(t,e){var l=this;"new"==t?l.$http.post("material_libs.json",l.lib).then(function(t){200==t.body.code?(l.libs.unshift(t.body.klass),l.lib=t.body.klass,l.dialogVisible=!1):l.$message.error(t.body.msg)}):l.$http.put("material_libs/"+e+".json",l.lib).then(function(t){200==t.body.code?(l.lib=t.body.klass,l.dialogVisible=!1):l.$message.error(t.body.msg)})},editLib:function(t){this.lib=t,this.edit_id=t.id,this.action="edit",this.dialogVisible=!0}}}},347:function(t,e,l){e=t.exports=l(7)(),e.push([t.i,"img[data-v-cb8caf74]{width:80px;height:80px}",""])},654:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("div",{staticClass:"crumbs"},[l("el-breadcrumb",{attrs:{separator:"/"}},[l("el-breadcrumb-item",[l("i",{staticClass:"el-icon-menu"}),t._v(" "),l("router-link",{attrs:{to:"/dashboard"}},[t._v("\n                       主页\n                   ")])],1),t._v(" "),l("el-breadcrumb-item",[t._v("材料库")])],1)],1),t._v(" "),l("el-button",{attrs:{type:"text"},on:{click:t.addLib}},[t._v("添加材料")]),t._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.libs,border:""}},[l("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),l("el-table-column",{attrs:{prop:"specify",label:"规格"}}),t._v(" "),l("el-table-column",{attrs:{prop:"count",label:"库存"}}),t._v(" "),l("el-table-column",{attrs:{prop:"price",label:"单价"}}),t._v(" "),l("el-table-column",{attrs:{prop:"kind",label:"类别"}}),t._v(" "),l("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),l("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([["default",function(e){return[l("el-button",{attrs:{type:"text"},on:{click:function(l){t.editLib(e.row)}}},[t._v("编辑")])]}]])})],1),t._v(" "),l("div",{staticClass:"pagination"},[l("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.page.current_page,"page-size":25,total:t.page.total_count},on:{"current-change":t.handlePage}})],1),t._v(" "),l("el-dialog",{attrs:{title:"材料库操作"},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e}}},[l("el-form",{ref:"lib",attrs:{inline:!0,model:t.lib,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"名称"}},[l("el-input",{model:{value:t.lib.name,callback:function(e){t.lib.name=e}}})],1),t._v(" "),l("el-form-item",{attrs:{label:"单价"}},[l("el-input",{model:{value:t.lib.price,callback:function(e){t.lib.price=e}}})],1),t._v(" "),l("el-form-item",{attrs:{label:"库存"}},[l("el-input",{model:{value:t.lib.count,callback:function(e){t.lib.count=e}}})],1),t._v(" "),l("el-form-item",{attrs:{label:"规格"}},[l("el-input",{model:{value:t.lib.specify,callback:function(e){t.lib.specify=e}}})],1),t._v(" "),l("el-form-item",{attrs:{label:"备注"}},[l("el-input",{model:{value:t.lib.remark,callback:function(e){t.lib.remark=e}}})],1)],1),t._v(" "),l("span",{staticClass:"dialog-footer",slot:"footer"},[l("el-button",{attrs:{type:"primary"},on:{click:function(e){t.libSubmit(t.action,t.edit_id)}}},[t._v("提交")]),t._v(" "),l("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]}},689:function(t,e,l){var i=l(347);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);l(30)("4592935c",i,!0)},98:function(t,e,l){l(689);var i=l(31)(l(213),l(654),"data-v-cb8caf74",null);t.exports=i.exports}});