webpackJsonp([15,41],{106:function(e,t,n){n(682);var a=n(31)(n(220),n(647),"data-v-a9ed65c0",null);e.exports=a.exports},220:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{recipients:[],completed:!1,type:"pending",page:{next_page:1}}},created:function(){this.fetchResource(this.page.next_page)},filters:{conver:function(e){var t="";switch(e){case"alipay":t="支付宝";break;case"wx_pub":t="公众号";break;case"bank":t="银行卡";break;default:t="支付宝"}return t}},methods:{fetchResource:function(e){var t=this;t.$http.get("recipients.json?page="+e).then(function(e){t.recipients=e.body.klass,t.page=e.body.page},function(e){t.$message.error("加载失败")})},batch_pay:function(e,t){var n=this;this.$http.post("encashments/"+e+"/recipient.json",{type:this.type}).then(function(a){200==a.body.code&&(n.recipients.splice(t,1),n.$message("处理完成"),n.recipients.length<=0&&n.$http.post("encashments/"+e+"/close_encash.json",{}).then(function(e){200==e.body.code&&n.$message("哇塞! 都处理完了, 好棒啊!")}))})},complete_recipients:function(e,t){var n=this;this.$http.get("recipients?type="+e+"&page="+t).then(function(t){var a=t.body;n.recipients=a.klass,n.page=a.page,"completed"==e?(n.completed=!0,n.type=e):(n.type=e,n.completed=!1)})},handlePage:function(e){this.complete_recipients(this.type,e)}}}},342:function(e,t,n){t=e.exports=n(7)(),t.push([e.i,".tag[data-v-a9ed65c0]{margin:4px;float:right;cursor:pointer}",""])},647:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"crumbs"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[e._v("提现列表")])],1)],1),e._v(" "),n("div",{staticClass:"tag-ele"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.completed,expression:"completed"}],on:{click:function(t){e.complete_recipients("pending")}}},[n("el-tag",{staticClass:"tag",attrs:{type:"primary"}},[e._v("待处理")])],1),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.completed,expression:"!completed"}],on:{click:function(t){e.complete_recipients("completed")}}},[n("el-tag",{staticClass:"tag",attrs:{type:"primary"}},[e._v("已处理的提现")])],1)]),e._v(" "),n("el-table",{attrs:{data:e.recipients,border:""}},[n("el-table-column",{attrs:{label:"生成时间",width:"300"},scopedSlots:e._u([["default",function(t){return[e._v("\n        "+e._s(e._f("date")(1e3*t.row.created_at,"%Y-%m-%d %T"))+"\n      ")]}]])}),e._v(" "),n("el-table-column",{attrs:{label:"金额",width:"250"},scopedSlots:e._u([["default",function(t){return[e._v("\n          "+e._s((t.row.amount/100).toFixed(2))+"\n        ")]}]])}),e._v(" "),n("el-table-column",{attrs:{label:"提现的用户"},scopedSlots:e._u([["default",function(t){return[e._v("\n            "+e._s(t.row.name)+"\n          ")]}]])}),e._v(" "),n("el-table-column",{attrs:{label:"提现渠道"},scopedSlots:e._u([["default",function(t){return[e._v("\n              "+e._s(e._f("conver")(t.row.channel_type))+"\n            ")]}]])}),e._v(" "),n("el-table-column",{attrs:{label:"提现到账户"},scopedSlots:e._u([["default",function(t){return[e._v("\n                "+e._s(t.row.account)+"\n              ")]}]])}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([["default",function(t){return[e.completed?e._e():n("span",{staticClass:"el-button el-button--danger",on:{click:function(n){e.batch_pay(t.row.id,t.$index)}}},[e._v("确认已经支付")]),e._v(" "),e.completed?n("span",[e._v("已完成")]):e._e()]}]])})],1),e._v(" "),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{layout:"prev, pager, next","current-page":e.page.current_page,"page-size":25,total:e.page.total_count},on:{"current-change":e.handlePage}})],1)],1)},staticRenderFns:[]}},682:function(e,t,n){var a=n(342);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(30)("1ca0fd0e",a,!0)}});